import{v as U,w as et,x as V,t as st,p as _,q as m,a as Q,d as b,y as rt,n as C,s as v,z as H,c as I,u as O,b as j,m as at,$ as ot}from"../chunks/disclose-version.IFR-fyCl.js";import{a as N,u as P,r as X,w as nt,p as T,z as W,y as l,s as d,o as it,A as G,x as ct}from"../chunks/runtime.DkaAAcCG.js";import{a as L,b as z,c as R,s as D,u as J,d as M,i as F,e as K}from"../chunks/store.JvnsxwMy.js";import{e as dt}from"../chunks/each.OU7cegmn.js";import{o as ut}from"../chunks/main-client.jbsLscHY.js";const lt=!0,$t=Object.freeze(Object.defineProperty({__proto__:null,prerender:lt},Symbol.toStringTag,{value:"Module"})),gt=async(u,e,t,n,s,a,o)=>{if(t())console.log(t());else{const i=await fetch(`/api?id=${n.id}&answer=${n.option}`).then(f=>f.json());i.correct?W(s,"bg-green-700"):W(s,"bg-red-700"),l(e,!0),l(a,i.correct)}};var vt=b("<button> </button>");function ft(u,e){N(e,!1);const t={};P(t);const n=()=>d(L,"$isQuestionAnswered",t),s=()=>d(z,"$isCorrect",t);let a=it("bg-blue-700");var o=m(u,!0,vt),i=Q(o);X(()=>{et(o,`shadow p-2 ${V(nt(a))} min-w-full rounded text-white font-bold`),st(i,e.option)}),o.__click=[gt,L,n,e,a,z,s],_(u,o),T()}U(["click"]);const _t=(u,e,t,n,s,a,o,i,f)=>{G(e,t()),l(n,!1),G(a,o()),l(i,!1)},mt=async(u,e,t,n,s,a,o,i,f,k)=>{try{await fetch(`/api/scores?id=${t()}&score=${s()}`,{method:"POST"})}catch(p){l(a,p)}i.fetchData(),l(f,!1),l(n,0)};var bt=b('<button class="w-full bg-green-800 px-6 py-4 rounded font-bold text-white shadow">Next country</button>'),wt=b('<button class="w-full bg-red-700 rounded font-bold text-white shadow px-6 py-4">Restart</button>'),pt=b('<div class="max-w-lg rounded overflow-hidden shadow-lg"><img class="w-full" height="240" width="360"> <div class="px-6 py-4"><div class="font-bold text-xl mb-2">What country is this?</div> <div class="grid gap-2 mb-2 sm:grid-cols-1 md:grid-cols-2"><!></div> <!> <!></div></div>');function yt(u,e){N(e,!1);const t={};P(t);const n=()=>d(R,"$countryId",t),s=()=>d(z,"$isCorrect",t),a=()=>d(D,"$score",t),o=()=>d(L,"$isQuestionAnswered",t),i=()=>d(J,"$uuid",t),f=()=>d(M,"$isError",t);let k=!1;var p=m(u,!0,pt),E=Q(p),r=v(v(E)),c=Q(r),$=v(v(c)),y=Q($),h=v(v($)),S=v(v(h)),x,A;X(()=>{x!==(x=`https://flagcdn.com/h240/${V(e.country.code)}.png`)&&H(E,"src",x),A!==(A=e.country.code)&&H(E,"alt",A)}),rt(y,()=>e.country.id,g=>{var w=O(g),Y=j(w);dt(Y,()=>e.country.answerOptions,1,(q,Z,Et)=>{var B=O(q),tt=j(B);ft(tt,{get id(){return e.country.id},get option(){return ct(Z)},isAlreadyAnswered:k}),I(q,B)},null),I(g,w)}),C(h,s,g=>{var w=m(g,!0,bt);w.__click=[_t,R,n,z,s,D,a,L,o],_(g,w)},null),C(S,()=>!s()&&o(),g=>{var w=m(g,!0,wt);w.__click=[mt,J,i,D,a,M,f,e,L,o],_(g,w)},null),_(u,p),T()}U(["click"]);var ht=b('<meta name="description" content="Quess-A-Flag">'),xt=b("<p>Error</p>"),At=b('<h1 class="text-center svelte-12om222">Loading</h1>'),Ct=b('<h1 class="text-center svelte-12om222">Refresh page to start again!</h1>'),kt=b('<section class="container mx-auto svelte-12om222"><!> <!></section>');function zt(u,e){N(e,!1);const t={};P(t);const n=()=>d(F,"$isLoading",t),s=()=>d(K,"$countries",t),a=()=>d(R,"$countryId",t),o=()=>d(M,"$isError",t);let i;const f=async()=>{l(F,!0);const r=await fetch("/api").then(c=>c.json());l(K,r),s()[0],l(R,0),l(F,!1)};ut(async()=>{await f()}),console.log(i);var k=m(u,!0,kt);at(r=>{var c=m(r,!0,ht);ot.title="Home",_(r,c)});var p=Q(k),E=v(v(p));C(p,o,r=>{var c=m(r,!0,xt);_(r,c)},null),C(E,n,r=>{var c=m(r,!0,At);_(r,c)},r=>{var c=O(r),$=j(c);C($,()=>a()>=s().length,y=>{var h=m(y,!0,Ct);_(y,h)},y=>{var h=O(y),S=j(h);C(S,()=>s().length!==0,x=>{var A=O(x),g=j(A);yt(g,{get country(){return s()[a()]},fetchData:f}),I(x,A)},null),I(y,h)}),I(r,c)}),_(u,k),T()}export{zt as component,$t as universal};
