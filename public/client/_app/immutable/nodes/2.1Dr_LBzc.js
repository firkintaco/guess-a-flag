import{G,H as Y,z as W,t as Z,g as h,h as x,a as I,d as p,x as E,c as A,b as C,y as Q,I as ee,s as l,J as M,w as te,$ as se,o as re}from"../chunks/disclose-version.BE1H4JuN.js";import{a as O,u as j,r as q,g as oe,p as L,b as P,z as g,s as c,m as ne,G as T,y as ae}from"../chunks/runtime.psRWym4x.js";import{a as $,b as D,s as S,c as F,d as z,i as N,e as U}from"../chunks/store.xwJxxw6r.js";import{e as ie}from"../chunks/each.qvh00t1l.js";import{s as J}from"../chunks/session.Tg9dBN4O.js";import{o as ce}from"../chunks/main-client._B59Dg30.js";const de=!0,je=Object.freeze(Object.defineProperty({__proto__:null,prerender:de},Symbol.toStringTag,{value:"Module"})),ue=async(o,t,e,i,r,n,a)=>{if(e())console.log(e());else{const s=await fetch(`/api?id=${i.id}&answer=${i.option}`).then(f=>f.json());s.correct?P(r,"bg-green-700"):P(r,"bg-red-700"),g(t,!0),g(n,s.correct)}};var le=p("<button> </button>");function fe(o,t){O(t,!1);const e={};j(e);const i=()=>c($,"$isQuestionAnswered",e),r=()=>c(D,"$isCorrect",e);let n=ne("bg-blue-700");var a=x(o,!0,le),s=I(a);q(()=>{Y(a,`shadow p-2 ${W(oe(n))} min-w-full rounded text-white font-bold`),Z(s,t.option)}),a.__click=[ue,$,i,t,n,D,r],h(o,a),L()}G(["click"]);const ge=async(o,t,e,i,r,n,a,s,f,y)=>{try{await fetch(`/api/scores?id=${e()?.user?.uid?e().user.uid:crypto.randomUUID().toString()}&score=${r()}`,{method:"POST"})}catch(v){g(n,v),console.log(v)}s.fetchData(),g(f,!1),g(i,0)};var ve=p('<button class="w-full bg-red-700 rounded font-bold text-white shadow px-6 py-4">Restart</button>');function K(o,t){O(t,!1);const e={};j(e);const i=()=>c(J,"$session",e),r=()=>c(S,"$score",e),n=()=>c(F,"$isError",e),a=()=>c($,"$isQuestionAnswered",e);var s=x(o,!0,ve);s.__click=[ge,J,i,S,r,F,n,t,$,a],h(o,s),L()}G(["click"]);const _e=(o,t,e,i,r,n,a,s,f)=>{T(t,e()),g(i,!1),T(n,a()),g(s,!1)};var me=p('<button class="w-full bg-green-800 px-6 py-4 rounded font-bold text-white shadow">Next country</button>');function be(o,t){O(t,!1);const e={};j(e);const i=()=>c(z,"$countryId",e),r=()=>c(D,"$isCorrect",e),n=()=>c(S,"$score",e),a=()=>c($,"$isQuestionAnswered",e);var s=Q(o),f=C(s);E(f,r,y=>{var v=x(y,!0,me);v.__click=[_e,z,i,D,r,S,n,$,a],h(y,v)},null),A(o,s),L()}G(["click"]);var we=p('<div class="max-w-lg rounded overflow-hidden shadow-lg bg-white"><img class="w-full" height="240" width="360"> <div class="px-6 py-4"><div class="font-bold text-xl mb-2">What country is this?</div> <div class="grid gap-2 mb-2 sm:grid-cols-1 md:grid-cols-2"><!></div> <!> <!></div></div>');function pe(o,t){O(t,!1);const e={};j(e);const i=()=>c(D,"$isCorrect",e),r=()=>c($,"$isQuestionAnswered",e);let n=!1;var a=x(o,!0,we),s=I(a),f=l(l(s)),y=I(f),v=l(l(y)),d=I(v),u=l(l(v)),B=l(l(u)),m,b;q(()=>{m!==(m=`https://flagcdn.com/h240/${W(t.country.code)}.png`)&&M(s,"src",m),b!==(b=t.country.code)&&M(s,"alt",b)}),ee(d,()=>t.country.id,w=>{var _=Q(w),k=C(_);ie(k,()=>t.country.answerOptions,1,(R,V,Qe)=>{var H=Q(R),X=C(H);fe(X,{get id(){return t.country.id},get option(){return ae(V)},isAlreadyAnswered:n}),A(R,H)},null),A(w,_)}),be(u,{}),E(B,()=>!i()&&r(),w=>{var _=Q(w),k=C(_);K(k,{get fetchData(){return t.fetchData}}),A(w,_)},null),h(o,a),L()}var ye=p('<meta name="description" content="Quess-A-Flag">'),he=p("<p>Error</p>"),xe=p('<h1 class="text-center svelte-12om222">Loading</h1>'),Ae=p('<h1 class="text-center svelte-12om222">Refresh page to start again!</h1> <!>',!0),Ce=p('<section class="container mx-auto svelte-12om222"><!> <!></section>');function Le(o,t){O(t,!1);const e={};j(e);const i=()=>c(N,"$isLoading",e),r=()=>c(U,"$countries",e),n=()=>c(z,"$countryId",e),a=()=>c(F,"$isError",e),s=async()=>{g(N,!0);const d=await fetch("/api").then(u=>u.json());g(U,d),r()[0],g(z,0),g(N,!1)};ce(async()=>{await s()});var f=x(o,!0,Ce);te(d=>{var u=x(d,!0,ye);se.title="Home",h(d,u)});var y=I(f),v=l(l(y));E(y,a,d=>{var u=x(d,!0,he);h(d,u)},null),E(v,i,d=>{var u=x(d,!0,xe);h(d,u)},d=>{var u=Q(d),B=C(u);E(B,()=>n()>=r().length,m=>{var b=re(m,!0,Ae),w=C(b),_=l(l(w));K(_,{fetchData:s}),A(m,b)},m=>{var b=Q(m),w=C(b);E(w,()=>r().length!==0,_=>{var k=Q(_),R=C(k);pe(R,{get country(){return r()[n()]},fetchData:s}),A(_,k)},null),A(m,b)}),A(d,u)}),h(o,f),L()}export{Le as component,je as universal};
