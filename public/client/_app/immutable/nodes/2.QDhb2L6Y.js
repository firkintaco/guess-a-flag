import{v as J,w as Z,x as K,d as tt,p as m,q as b,f as A,l as w,y as et,n as k,k as _,z as H,b as C,u as Q,j,m as st,$ as at}from"../chunks/disclose-version.50QhH8_L.js";import{t as M,o as N,r as U,w as ot,q as P,z as W,y as l,v as u,m as rt,A as $,x as nt}from"../chunks/runtime.A3zHqo8R.js";import{a as I,b as R,c as S,s as D,u as E,i as F,d as G}from"../chunks/store.y7lpHhQm.js";import{e as it}from"../chunks/each.G8Zm4jCr.js";import{o as ct}from"../chunks/main-client.mcESlmFZ.js";const dt=!0,Ot=Object.freeze(Object.defineProperty({__proto__:null,prerender:dt},Symbol.toStringTag,{value:"Module"})),ut=async(c,e,t,n,s,o,a)=>{if(t())console.log(t());else{const i=await fetch(`/api?id=${n.id}&answer=${n.option}`).then(y=>y.json());i.correct?W(s,"bg-green-700"):W(s,"bg-red-700"),l(e,!0),l(o,i.correct)}};var lt=w("<button> </button>");function ft(c,e){M(e,!1);const t={};N(t);const n=()=>u(I,"$isQuestionAnswered",t),s=()=>u(R,"$isCorrect",t);let o=rt("bg-blue-700");var a=b(c,!0,lt),i=A(a);U(()=>{Z(a,`shadow p-2 ${K(ot(o))} min-w-full rounded text-white font-bold`),tt(i,e.option)}),a.__click=[ut,I,n,e,o,R,s],m(c,a),P()}J(["click"]);const gt=(c,e,t,n,s,o,a,i,y)=>{$(e,t()),l(n,!1),$(o,a()),l(i,!1)},vt=async(c,e,t,n,s,o,a,i)=>{await fetch(`/api/scores?id=${t()}&score=${s()}`,{method:"POST"}),o.fetchData(),l(a,!1),l(n,0)};var _t=w('<button class="w-full bg-blue-700 px-6 py-4 rounded font-bold text-white shadow">Next country</button>'),mt=w('<button class="w-full bg-blue-700 rounded font-bold text-white shadow px-6 py-4">Restart</button>'),bt=w('<div class="max-w-lg rounded overflow-hidden shadow-lg"><img class="w-full" height="240" width="360"> <div class="px-6 py-4"><div class="font-bold text-xl mb-2">What country is this?</div> <div class="grid gap-2 mb-2 sm:grid-cols-1 md:grid-cols-2"><!></div> <!> <!></div></div>');function wt(c,e){M(e,!1);const t={};N(t);const n=()=>u(S,"$countryId",t),s=()=>u(R,"$isCorrect",t),o=()=>u(D,"$score",t),a=()=>u(I,"$isQuestionAnswered",t),i=()=>u(E,"$uuid",t);let y=!1;var O=b(c,!0,bt),r=A(O),d=_(_(r)),q=A(d),f=_(_(q)),h=A(f),L=_(_(f)),z=_(_(L)),p,x;U(()=>{p!==(p=`https://flagcdn.com/h240/${K(e.country.code)}.png`)&&H(r,"src",p),x!==(x=e.country.code)&&H(r,"alt",x)}),et(h,()=>e.country.id,g=>{var v=Q(g),V=j(v);it(V,()=>e.country.answerOptions,1,(T,X,At)=>{var B=Q(T),Y=j(B);ft(Y,{get id(){return e.country.id},get option(){return nt(X)},isAlreadyAnswered:y}),C(T,B)},null),C(g,v)}),k(L,s,g=>{var v=b(g,!0,_t);v.__click=[gt,S,n,R,s,D,o,I,a],m(g,v)},null),k(z,()=>!s()&&a(),g=>{var v=b(g,!0,mt);v.__click=[vt,E,i,D,o,e,I,a],m(g,v)},null),m(c,O),P()}J(["click"]);var yt=w('<meta name="description" content="Quess-A-Flag">'),ht=w('<h1 class="svelte-12om222">Loading</h1>'),pt=w('<h1 class="svelte-12om222">Refresh page to start again!</h1>'),xt=w('<section class="container mx-auto svelte-12om222"><!></section>');function Lt(c,e){M(e,!1);const t={};N(t);const n=()=>u(F,"$isLoading",t),s=()=>u(G,"$countries",t),o=()=>u(S,"$countryId",t);let a;const i=async()=>{l(F,!0);const r=await fetch("/api").then(d=>d.json());l(G,r),s()[0],l(S,0),l(F,!1)};ct(async()=>{await i()}),console.log(a);var y=b(c,!0,xt);st(r=>{var d=b(r,!0,yt);at.title="Home",m(r,d)});var O=A(y);k(O,n,r=>{var d=b(r,!0,ht);m(r,d)},r=>{var d=Q(r),q=j(d);k(q,()=>o()>=s().length,f=>{var h=b(f,!0,pt);m(f,h)},f=>{var h=Q(f),L=j(h);k(L,()=>s().length!==0,z=>{var p=Q(z),x=j(p);wt(x,{get country(){return s()[o()]},fetchData:i}),C(z,p)},null),C(f,h)}),C(r,d)}),m(c,y),P()}export{Lt as component,Ot as universal};
