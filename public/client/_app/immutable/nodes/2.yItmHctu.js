import{j as _e,r as z,k as re,S as X,l as ve,m as $,n as ge,p as he,q as B,u as me,v as le,w as ye,g as oe,t as pe,f as C,h as E,a as L,d as A,x as be,y as H,s as x,z as G,c as T,A as D,b as j,B as we,$ as xe,o as Ae}from"../chunks/disclose-version.lJpY8vyd.js";import{r as I,i as Ce,E as ie,d as Ee,e as Q,l as J,f as Y,g as Z,h as Ie,j as O,k as Se,m as ke,n as ce,o as ze,q as Le,t as ue,v as ee,c as K,b as P,w as Te,p as U,x as te,y as b,s as w,z as ne,A as je}from"../chunks/runtime.J5xuhOAO.js";import{i as M,a as N,c as R,s as q,b as F,d as se}from"../chunks/store.mXhkphAh.js";import{o as Me}from"../chunks/main-client.70HNjuXe.js";function Oe(){}function Qe(e,s,t,a,n,u,o){const g=(t&O)!==0,r=Se(t,e);let h=null;_e(e,g);let d,m=null,p=null;r.r=l=>{const f=h,c=f.s;c.add(l),l.f(()=>{c.delete(l),c.size===0&&f.e!==null&&(f.d!==null&&(z(f.d),f.d=null),Q(f.e),f.e=null)})};const i=()=>{const l={d:null,e:null,s:new Set,p:h},f=I(()=>{const c=r.d;c!==null&&(z(c),r.d=null);let _=r.a;(r.f&O)!==0&&(_=me(),r.a.appendChild(_)),u(_),l.d=r.d,r.d=null},r,!0);l.e=f,h=l},y=l=>{const f=l.f,c=(f&O)!==0,_=l.a;o(d,l,_,c,n,f,!0,m)},v=I(()=>{const l=s();d=Ce(l)?l:l==null?[]:Array.from(l),a!==null?m=d.map(a):t&ie||d.map(Oe);const f=d.length;if(u!==null){if(f===0){if(r.v.length!==0||p===null){y(r),i();return}}else if(r.v.length===0&&h!==null){const c=h,_=c.s;_.size===0?c.d!==null&&(z(c.d),c.d=null):re(_,"out")}}p!==null&&ke(p)},r,!1);p=I(y,r,!0),Ee(v,()=>{const l=r.f,f=r.a,c=(l&O)!==0;let _=h;for(;_!==null;){const S=_.d;S!==null&&z(S);const k=_.e;k!==null&&Q(k),_=_.p}o([],r,f,c,n,l,!1,m),Q(p)}),r.e=v}function He(e,s,t,a,n){Qe(e,s,t,null,a,n,De)}function De(e,s,t,a,n,u,o){var g=X in e&&e[X].i,r=s.v,h=s.s;g&&(u&=~Y);var d=r.length,m=e.length,p=Math.max(d,m),i=0,y,v;if(h.length!==0&&Re(h),m===0)for(y=[],a&&d!==0&&ve(t);i<p;)v=r[i++],V(v,h,o,a);else{var l;if(y=Array(m),$!==null)for(var f=$[0];i<p;i++){l=g?J(e,i):e[i];var c=ge(f);he(c),f=c.at(-1).nextSibling.nextSibling,v=ae(l,null,i,n,u),y[i]=v}else for(;i<p;i++)i>=d?(l=g?J(e,i):e[i],v=ae(l,null,i,n,u),y[i]=v,Ne(v,t,a,null)):i>=m?(v=r[i],V(v,h,o)):(l=e[i],v=r[i],y[i]=v,Be(v,l,i,u))}s.v=y}function Ne(e,s,t,a){var n=e.d;return a===null?t?B(n,s,null):B(n,s.parentNode,s):B(n,null,a)}function Re(e){var s=e.length;if(s>0){for(var t=0,a,n;t<s;t++)a=e[t],n=a.r,n!==null&&(a.r=null,V(a,null,!1));e.length=0}}function Be(e,s,t,a){a&Y?Z(e.v,s):Ie(e.v)&&(e.v.o[e.v.p]=s);const n=e.s,u=(a&ce)!==0,o=e.a;n!==null&&a&ie&&o!==null&&o(e,n),u?Z(e.i,t):e.i=t}function V(e,s,t,a=!1){const n=e.s;if(t&&n!==null){for(let o of n)o.r==="key"&&n.delete(o);if(n.size===0)e.s=null;else{re(n,"out"),s!==null&&s.push(e);return}}const u=e.d;!a&&u!==null&&z(u),Q(e.e)}function ae(e,s,t,a,n){const o=(n&Y)===0?e:n&Le?ee(e):ue(e),g=n&ce?ee(t):t,r=ze(o,g,s),h=I(d=>{a(null,d.v,d.i)},r,!0);return r.e=h,r}const qe=!0,rt=Object.freeze(Object.defineProperty({__proto__:null,prerender:qe},Symbol.toStringTag,{value:"Module"})),Fe=async(e,s,t,a,n,u,o)=>{if(t())console.log(t());else{const g=await fetch(`/api?id=${a.id}&answer=${a.option}`).then(r=>r.json());g.correct?te(n,"bg-green-700"):te(n,"bg-red-700"),b(s,!0),b(u,g.correct)}};var Ve=A("<button> </button>");function Ye(e,s){K(s,!1);const t={};P(t);const a=()=>w(M,"$isQuestionAnswered",t),n=()=>w(N,"$isCorrect",t);let u=ue("bg-blue-700");var o=E(e,!0,Ve),g=L(o);I(()=>{ye(o,`shadow p-2 ${oe(Te(u))} min-w-full rounded text-white font-bold`),pe(g,s.option)}),o.__click=[Fe,M,a,s,u,N,n],C(e,o),U()}le(["click"]);const Ke=(e,s,t,a,n,u,o,g,r)=>{ne(s,t()),b(a,!1),ne(u,o()),b(g,!1)},Pe=(e,s,t,a,n,u)=>{s.fetchData(),b(t,!1),b(n,0)};var Ue=A('<button class="w-full bg-blue-700 px-6 py-4 rounded font-bold text-white shadow">Next country</button>'),We=A('<button class="w-full bg-blue-700 rounded font-bold text-white shadow px-6 py-4">Restart</button>'),Xe=A('<div class="max-w-lg rounded overflow-hidden shadow-lg"><img class="w-full" height="240" width="360"> <div class="px-6 py-4"><div class="font-bold text-xl mb-2">What country is this?</div> <div class="grid gap-2 mb-2 sm:grid-cols-1 md:grid-cols-2"><!></div> <!> <!></div></div>');function $e(e,s){K(s,!1);const t={};P(t);const a=()=>w(R,"$countryId",t),n=()=>w(N,"$isCorrect",t),u=()=>w(q,"$score",t),o=()=>w(M,"$isQuestionAnswered",t);let g=!1;var r=E(e,!0,Xe),h=L(r),d=x(x(h)),m=L(d),p=x(x(m)),i=L(p),y=x(x(p)),v=x(x(y)),l,f;I(()=>{l!==(l=`https://flagcdn.com/h240/${oe(s.country.code)}.png`)&&G(h,"src",l),f!==(f=s.country.code)&&G(h,"alt",f)}),be(i,()=>s.country.id,c=>{var _=D(c),S=j(_);He(S,()=>s.country.answerOptions,1,(k,de,et)=>{var W=D(k),fe=j(W);Ye(fe,{get id(){return s.country.id},get option(){return je(de)},isAlreadyAnswered:g}),T(k,W)},null),T(c,_)}),H(y,n,c=>{var _=E(c,!0,Ue);_.__click=[Ke,R,a,N,n,q,u,M,o],C(c,_)},null),H(v,()=>!n()&&o(),c=>{var _=E(c,!0,We);_.__click=[Pe,s,M,o,q,u],C(c,_)},null),C(e,r),U()}le(["click"]);var Ge=A('<meta name="description" content="Quess-A-Flag">'),Je=A("<h1>Loading</h1>"),Ze=A('<section class="container mx-auto"><!></section> <style>section { display: flex; flex-direction: column; justify-content: center; align-items: center; flex: 0.6; } h1 { width: 100%; }</style>',!0);function lt(e,s){K(s,!1);const t={};P(t);const a=()=>w(F,"$isLoading",t),n=()=>w(se,"$countries",t),u=()=>w(R,"$countryId",t);let o;const g=async()=>{b(F,!0);const d=await fetch("/api").then(m=>m.json());b(se,d),n()[0],b(R,0),b(F,!1)};Me(async()=>{await g()}),console.log(o);var r=D(e),h=j(r);we(d=>{var m=E(d,!0,Ge);xe.title="Home",C(d,m)}),H(h,a,d=>{var m=E(d,!0,Je);C(d,m)},d=>{var m=Ae(d,!0,Ze),p=j(m),i=L(p);H(i,()=>n().length!==0,y=>{var v=D(y),l=j(v);$e(l,{get country(){return n()[u()]},fetchData:g}),T(y,v)},null),T(d,m)}),T(e,r),U()}export{lt as component,rt as universal};
