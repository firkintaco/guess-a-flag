import{v as J,w as Z,x as K,t as tt,c as m,o as b,b as A,e as w,y as et,i as C,s as _,z as W,a as k,d as Q,f as I,h as st,$ as at}from"../chunks/disclose-version.73gxhAIW.js";import{a as N,u as P,r as U,g as ot,p as T,c as $,s as l,z as u,m as rt,A as q,b as nt}from"../chunks/runtime.W3UjnrTG.js";import{a as O,b as R,c as S,s as F,u as E,i as M,d as G}from"../chunks/store.y7lpHhQm.js";import{e as it}from"../chunks/each.DMuK-KsK.js";import{o as ct}from"../chunks/main-client.xzPqCEBL.js";const dt=!0,jt=Object.freeze(Object.defineProperty({__proto__:null,prerender:dt},Symbol.toStringTag,{value:"Module"})),ut=async(c,e,t,n,s,o,a)=>{if(t())console.log(t());else{const i=await fetch(`/api?id=${n.id}&answer=${n.option}`).then(h=>h.json());i.correct?$(s,"bg-green-700"):$(s,"bg-red-700"),l(e,!0),l(o,i.correct)}};var lt=w("<button> </button>");function gt(c,e){N(e,!1);const t={};P(t);const n=()=>u(O,"$isQuestionAnswered",t),s=()=>u(R,"$isCorrect",t);let o=rt("bg-blue-700");var a=b(c,!0,lt),i=A(a);U(()=>{Z(a,`shadow p-2 ${K(ot(o))} min-w-full rounded text-white font-bold`),tt(i,e.option)}),a.__click=[ut,O,n,e,o,R,s],m(c,a),T()}J(["click"]);const ft=(c,e,t,n,s,o,a,i,h)=>{q(e,t()),l(n,!1),q(o,a()),l(i,!1)},vt=async(c,e,t,n,s,o,a,i)=>{await fetch(`/api/scores?id=${t()}&score=${s()}`,{method:"POST"}),o.fetchData(),l(a,!1),l(n,0)};var _t=w('<button class="w-full bg-blue-700 px-6 py-4 rounded font-bold text-white shadow">Next country</button>'),mt=w('<button class="w-full bg-blue-700 rounded font-bold text-white shadow px-6 py-4">Restart</button>'),bt=w('<div class="max-w-lg rounded overflow-hidden shadow-lg"><img class="w-full" height="240" width="360"> <div class="px-6 py-4"><div class="font-bold text-xl mb-2">What country is this?</div> <div class="grid gap-2 mb-2 sm:grid-cols-1 md:grid-cols-2"><!></div> <!> <!></div></div>');function wt(c,e){N(e,!1);const t={};P(t);const n=()=>u(S,"$countryId",t),s=()=>u(R,"$isCorrect",t),o=()=>u(F,"$score",t),a=()=>u(O,"$isQuestionAnswered",t),i=()=>u(E,"$uuid",t);let h=!1;var j=b(c,!0,bt),r=A(j),d=_(_(r)),D=A(d),g=_(_(D)),y=A(g),L=_(_(g)),z=_(_(L)),p,x;U(()=>{p!==(p=`https://flagcdn.com/h240/${K(e.country.code)}.png`)&&W(r,"src",p),x!==(x=e.country.code)&&W(r,"alt",x)}),et(y,()=>e.country.id,f=>{var v=Q(f),V=I(v);it(V,()=>e.country.answerOptions,1,(B,X,At)=>{var H=Q(B),Y=I(H);gt(Y,{get id(){return e.country.id},get option(){return nt(X)},isAlreadyAnswered:h}),k(B,H)},null),k(f,v)}),C(L,s,f=>{var v=b(f,!0,_t);v.__click=[ft,S,n,R,s,F,o,O,a],m(f,v)},null),C(z,()=>!s()&&a(),f=>{var v=b(f,!0,mt);v.__click=[vt,E,i,F,o,e,O,a],m(f,v)},null),m(c,j),T()}J(["click"]);var ht=w('<meta name="description" content="Quess-A-Flag">'),yt=w('<h1 class="svelte-12om222">Loading</h1>'),pt=w('<h1 class="svelte-12om222">Refresh page to start again!</h1>'),xt=w('<section class="container mx-auto svelte-12om222"><!></section>');function Lt(c,e){N(e,!1);const t={};P(t);const n=()=>u(M,"$isLoading",t),s=()=>u(G,"$countries",t),o=()=>u(S,"$countryId",t);let a;const i=async()=>{l(M,!0);const r=await fetch("/api").then(d=>d.json());l(G,r),s()[0],l(S,0),l(M,!1)};ct(async()=>{await i()}),console.log(a);var h=b(c,!0,xt);st(r=>{var d=b(r,!0,ht);at.title="Home",m(r,d)});var j=A(h);C(j,n,r=>{var d=b(r,!0,yt);m(r,d)},r=>{var d=Q(r),D=I(d);C(D,()=>o()>=s().length,g=>{var y=b(g,!0,pt);m(g,y)},g=>{var y=Q(g),L=I(y);C(L,()=>s().length!==0,z=>{var p=Q(z),x=I(p);wt(x,{get country(){return s()[o()]},fetchData:i}),k(z,p)},null),k(g,y)}),k(r,d)}),m(c,h),T()}export{Lt as component,jt as universal};
