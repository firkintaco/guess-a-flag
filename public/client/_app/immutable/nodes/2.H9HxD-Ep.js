import{G as T,H as Y,z as K,t as Z,g as w,h as p,a as R,d as m,x as E,c as h,b as y,y as k,I as tt,s as v,J as H,w as et,$ as st,o as rt}from"../chunks/disclose-version.BE1H4JuN.js";import{a as S,u as j,r as V,g as ot,p as L,b as M,z as f,s as c,m as nt,G as U,y as at}from"../chunks/runtime.psRWym4x.js";import{a as x,b as D,s as I,c as N,d as P,u as J,i as G,e as W}from"../chunks/store.SAyfdFr1.js";import{e as it}from"../chunks/each.qvh00t1l.js";import{s as q}from"../chunks/session.Tg9dBN4O.js";import{o as ct}from"../chunks/main-client._B59Dg30.js";const dt=!0,St=Object.freeze(Object.defineProperty({__proto__:null,prerender:dt},Symbol.toStringTag,{value:"Module"})),ut=async(n,e,t,a,s,r,i)=>{if(t())console.log(t());else{const o=await fetch(`/api?id=${a.id}&answer=${a.option}`).then(d=>d.json());o.correct?M(s,"bg-green-700"):M(s,"bg-red-700"),f(e,!0),f(r,o.correct)}};var lt=m("<button> </button>");function ft(n,e){S(e,!1);const t={};j(t);const a=()=>c(x,"$isQuestionAnswered",t),s=()=>c(D,"$isCorrect",t);let r=nt("bg-blue-700");var i=p(n,!0,lt),o=R(i);V(()=>{Y(i,`shadow p-2 ${K(ot(r))} min-w-full rounded text-white font-bold`),Z(o,e.option)}),i.__click=[ut,x,a,e,r,D,s],w(n,i),L()}T(["click"]);const gt=async(n,e,t,a,s,r,i,o,d,_)=>{try{await fetch(`/api/scores?id=${t()?.user?t().user.uid:crypto.randomUUID().toString()}&score=${s()}`,{method:"POST"})}catch(u){f(r,u),console.log(u)}o.fetchData(),f(d,!1),f(a,0)};var vt=m('<button class="w-full bg-red-700 rounded font-bold text-white shadow px-6 py-4">Restart</button>');function _t(n,e){S(e,!1);const t={};j(t);const a=()=>c(q,"$session",t),s=()=>c(I,"$score",t),r=()=>c(N,"$isError",t),i=()=>c(x,"$isQuestionAnswered",t),o=()=>c(D,"$isCorrect",t);var d=k(n),_=y(d);E(_,()=>!o()&&i(),u=>{var $=p(u,!0,vt);$.__click=[gt,q,a,I,s,N,r,e,x,i],w(u,$)},null),h(n,d),L()}T(["click"]);const mt=(n,e,t,a,s,r,i,o,d)=>{U(e,t()),f(a,!1),U(r,i()),f(o,!1)};var bt=m('<button class="w-full bg-green-800 px-6 py-4 rounded font-bold text-white shadow">Next country</button>');function wt(n,e){S(e,!1);const t={};j(t);const a=()=>c(P,"$countryId",t),s=()=>c(D,"$isCorrect",t),r=()=>c(I,"$score",t),i=()=>c(x,"$isQuestionAnswered",t);var o=k(n),d=y(o);E(d,s,_=>{var u=p(_,!0,bt);u.__click=[mt,P,a,D,s,I,r,x,i],w(_,u)},null),h(n,o),L()}T(["click"]);var pt=m('<div class="max-w-lg rounded overflow-hidden shadow-lg bg-white"><img class="w-full" height="240" width="360"> <div class="px-6 py-4"><div class="font-bold text-xl mb-2">What country is this?</div> <div class="grid gap-2 mb-2 sm:grid-cols-1 md:grid-cols-2"><!></div> <!> <!></div></div>');function ht(n,e){S(e,!1),j({});let a=!1;var s=p(n,!0,pt),r=R(s),i=v(v(r)),o=R(i),d=v(v(o)),_=R(d),u=v(v(d)),$=v(v(u)),C,O;V(()=>{C!==(C=`https://flagcdn.com/h240/${K(e.country.code)}.png`)&&H(r,"src",C),O!==(O=e.country.code)&&H(r,"alt",O)}),tt(_,()=>e.country.id,l=>{var g=k(l),F=y(g);it(F,()=>e.country.answerOptions,1,(b,A,z)=>{var Q=k(b),B=y(Q);ft(B,{get id(){return e.country.id},get option(){return at(A)},isAlreadyAnswered:a}),h(b,Q)},null),h(l,g)}),wt(u,{}),_t($,{get fetchData(){return e.fetchData}}),w(n,s),L()}const yt=async(n,e,t,a,s,r,i,o,d,_)=>{try{await fetch(`/api/scores?id=${t()}&score=${s()}`,{method:"POST"})}catch(u){f(r,u)}o(),f(d,!1),f(a,0)};var xt=m('<meta name="description" content="Quess-A-Flag">'),$t=m("<p>Error</p>"),At=m('<h1 class="text-center svelte-12om222">Loading</h1>'),Qt=m('<h1 class="text-center svelte-12om222">Refresh page to start again!</h1> <button class="w-full bg-red-700 rounded font-bold text-white shadow px-6 py-4">Restart</button>',!0),kt=m('<section class="container mx-auto svelte-12om222"><!> <!></section>');function jt(n,e){S(e,!1);const t={};j(t);const a=()=>c(G,"$isLoading",t),s=()=>c(W,"$countries",t),r=()=>c(P,"$countryId",t),i=()=>c(J,"$uuid",t),o=()=>c(I,"$score",t),d=()=>c(N,"$isError",t),_=()=>c(x,"$isQuestionAnswered",t),u=async()=>{f(G,!0);const l=await fetch("/api").then(g=>g.json());f(W,l),s()[0],f(P,0),f(G,!1)};ct(async()=>{await u()});var $=p(n,!0,kt);et(l=>{var g=p(l,!0,xt);st.title="Home",w(l,g)});var C=R($),O=v(v(C));E(C,d,l=>{var g=p(l,!0,$t);w(l,g)},null),E(O,a,l=>{var g=p(l,!0,At);w(l,g)},l=>{var g=k(l),F=y(g);E(F,()=>r()>=s().length,b=>{var A=rt(b,!0,Qt),z=y(A),Q=v(v(z));Q.__click=[yt,J,i,I,o,N,d,u,x,_],h(b,A)},b=>{var A=k(b),z=y(A);E(z,()=>s().length!==0,Q=>{var B=k(Q),X=y(B);ht(X,{get country(){return s()[r()]},fetchData:u}),h(Q,B)},null),h(b,A)}),h(l,g)}),w(n,$),L()}T(["click"]);export{jt as component,St as universal};
