import{v as J,w as Z,x as K,t as tt,p as m,q as b,a as A,d as w,y as et,n as C,s as _,z as H,c as k,u as Q,b as I,m as st,$ as at}from"../chunks/disclose-version.IFR-fyCl.js";import{a as N,u as P,r as U,w as rt,p as T,z as W,y as l,s as u,o as nt,A as $,x as ot}from"../chunks/runtime.DkaAAcCG.js";import{a as O,b as R,c as S,s as F,u as E,i as M,d as G}from"../chunks/store.y7lpHhQm.js";import{e as it}from"../chunks/each.OU7cegmn.js";import{o as ct}from"../chunks/main-client.jbsLscHY.js";const dt=!0,jt=Object.freeze(Object.defineProperty({__proto__:null,prerender:dt},Symbol.toStringTag,{value:"Module"})),ut=async(c,e,t,o,s,r,a)=>{if(t())console.log(t());else{const i=await fetch(`/api?id=${o.id}&answer=${o.option}`).then(y=>y.json());i.correct?W(s,"bg-green-700"):W(s,"bg-red-700"),l(e,!0),l(r,i.correct)}};var lt=w("<button> </button>");function gt(c,e){N(e,!1);const t={};P(t);const o=()=>u(O,"$isQuestionAnswered",t),s=()=>u(R,"$isCorrect",t);let r=nt("bg-blue-700");var a=b(c,!0,lt),i=A(a);U(()=>{Z(a,`shadow p-2 ${K(rt(r))} min-w-full rounded text-white font-bold`),tt(i,e.option)}),a.__click=[ut,O,o,e,r,R,s],m(c,a),T()}J(["click"]);const ft=(c,e,t,o,s,r,a,i,y)=>{$(e,t()),l(o,!1),$(r,a()),l(i,!1)},vt=async(c,e,t,o,s,r,a,i)=>{await fetch(`/api/scores?id=${t()}&score=${s()}`,{method:"POST"}),r.fetchData(),l(a,!1),l(o,0)};var _t=w('<button class="w-full bg-green-800 px-6 py-4 rounded font-bold text-white shadow">Next country</button>'),mt=w('<button class="w-full bg-red-700 rounded font-bold text-white shadow px-6 py-4">Restart</button>'),bt=w('<div class="max-w-lg rounded overflow-hidden shadow-lg"><img class="w-full" height="240" width="360"> <div class="px-6 py-4"><div class="font-bold text-xl mb-2">What country is this?</div> <div class="grid gap-2 mb-2 sm:grid-cols-1 md:grid-cols-2"><!></div> <!> <!></div></div>');function wt(c,e){N(e,!1);const t={};P(t);const o=()=>u(S,"$countryId",t),s=()=>u(R,"$isCorrect",t),r=()=>u(F,"$score",t),a=()=>u(O,"$isQuestionAnswered",t),i=()=>u(E,"$uuid",t);let y=!1;var j=b(c,!0,bt),n=A(j),d=_(_(n)),D=A(d),g=_(_(D)),h=A(g),L=_(_(g)),z=_(_(L)),p,x;U(()=>{p!==(p=`https://flagcdn.com/h240/${K(e.country.code)}.png`)&&H(n,"src",p),x!==(x=e.country.code)&&H(n,"alt",x)}),et(h,()=>e.country.id,f=>{var v=Q(f),V=I(v);it(V,()=>e.country.answerOptions,1,(q,X,At)=>{var B=Q(q),Y=I(B);gt(Y,{get id(){return e.country.id},get option(){return ot(X)},isAlreadyAnswered:y}),k(q,B)},null),k(f,v)}),C(L,s,f=>{var v=b(f,!0,_t);v.__click=[ft,S,o,R,s,F,r,O,a],m(f,v)},null),C(z,()=>!s()&&a(),f=>{var v=b(f,!0,mt);v.__click=[vt,E,i,F,r,e,O,a],m(f,v)},null),m(c,j),T()}J(["click"]);var yt=w('<meta name="description" content="Quess-A-Flag">'),ht=w('<h1 class="text-center svelte-12om222">Loading</h1>'),pt=w('<h1 class="text-center svelte-12om222">Refresh page to start again!</h1>'),xt=w('<section class="container mx-auto svelte-12om222"><!></section>');function Lt(c,e){N(e,!1);const t={};P(t);const o=()=>u(M,"$isLoading",t),s=()=>u(G,"$countries",t),r=()=>u(S,"$countryId",t);let a;const i=async()=>{l(M,!0);const n=await fetch("/api").then(d=>d.json());l(G,n),s()[0],l(S,0),l(M,!1)};ct(async()=>{await i()}),console.log(a);var y=b(c,!0,xt);st(n=>{var d=b(n,!0,yt);at.title="Home",m(n,d)});var j=A(y);C(j,o,n=>{var d=b(n,!0,ht);m(n,d)},n=>{var d=Q(n),D=I(d);C(D,()=>r()>=s().length,g=>{var h=b(g,!0,pt);m(g,h)},g=>{var h=Q(g),L=I(h);C(L,()=>s().length!==0,z=>{var p=Q(z),x=I(p);wt(x,{get country(){return s()[r()]},fetchData:i}),k(z,p)},null),k(g,h)}),k(n,d)}),m(c,y),T()}export{Lt as component,jt as universal};
