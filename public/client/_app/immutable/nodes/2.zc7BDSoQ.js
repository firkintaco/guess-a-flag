import{G as F,H as X,z as W,t as Y,g as w,h as y,a as I,d as m,x as $,c as h,b as x,y as C,I as Z,s as g,J as M,w as tt,$ as et,o as st}from"../chunks/disclose-version.BE1H4JuN.js";import{a as O,u as j,r as q,g as rt,p as L,b as P,z as v,s as u,m as ot,G as T,y as at}from"../chunks/runtime.psRWym4x.js";import{a as k,b as D,s as S,c as N,d as z,i as B,e as U}from"../chunks/store.xwJxxw6r.js";import{e as nt}from"../chunks/each.qvh00t1l.js";import{s as J}from"../chunks/session.Tg9dBN4O.js";import{o as it}from"../chunks/main-client._B59Dg30.js";const ct=!0,Dt=Object.freeze(Object.defineProperty({__proto__:null,prerender:ct},Symbol.toStringTag,{value:"Module"})),dt=async(n,e,t,c,s,r,i)=>{if(t())console.log(t());else{const o=await fetch(`/api?id=${c.id}&answer=${c.option}`).then(d=>d.json());o.correct?P(s,"bg-green-700"):P(s,"bg-red-700"),v(e,!0),v(r,o.correct)}};var ut=m("<button> </button>");function lt(n,e){O(e,!1);const t={};j(t);const c=()=>u(k,"$isQuestionAnswered",t),s=()=>u(D,"$isCorrect",t);let r=ot("bg-blue-700");var i=y(n,!0,ut),o=I(i);q(()=>{X(i,`shadow p-2 ${W(rt(r))} min-w-full rounded text-white font-bold`),Y(o,e.option)}),i.__click=[dt,k,c,e,r,D,s],w(n,i),L()}F(["click"]);const ft=async(n,e,t,c,s,r,i,o,d,_)=>{try{await fetch(`/api/scores?id=${t()?.user?t().user.uid:crypto.randomUUID().toString()}&score=${s()}`,{method:"POST"})}catch(f){v(r,f),console.log(f)}o.fetchData(),v(d,!1),v(c,0)};var gt=m('<button class="w-full bg-red-700 rounded font-bold text-white shadow px-6 py-4">Restart</button>');function K(n,e){O(e,!1);const t={};j(t);const c=()=>u(J,"$session",t),s=()=>u(S,"$score",t),r=()=>u(N,"$isError",t),i=()=>u(k,"$isQuestionAnswered",t),o=()=>u(D,"$isCorrect",t);var d=C(n),_=x(d);$(_,()=>!o()&&i(),f=>{var a=y(f,!0,gt);a.__click=[ft,J,c,S,s,N,r,e,k,i],w(f,a)},null),h(n,d),L()}F(["click"]);const vt=(n,e,t,c,s,r,i,o,d)=>{T(e,t()),v(c,!1),T(r,i()),v(o,!1)};var _t=m('<button class="w-full bg-green-800 px-6 py-4 rounded font-bold text-white shadow">Next country</button>');function mt(n,e){O(e,!1);const t={};j(t);const c=()=>u(z,"$countryId",t),s=()=>u(D,"$isCorrect",t),r=()=>u(S,"$score",t),i=()=>u(k,"$isQuestionAnswered",t);var o=C(n),d=x(o);$(d,s,_=>{var f=y(_,!0,_t);f.__click=[vt,z,c,D,s,S,r,k,i],w(_,f)},null),h(n,o),L()}F(["click"]);var bt=m('<div class="max-w-lg rounded overflow-hidden shadow-lg bg-white"><img class="w-full" height="240" width="360"> <div class="px-6 py-4"><div class="font-bold text-xl mb-2">What country is this?</div> <div class="grid gap-2 mb-2 sm:grid-cols-1 md:grid-cols-2"><!></div> <!> <!></div></div>');function pt(n,e){O(e,!1),j({});let c=!1;var s=y(n,!0,bt),r=I(s),i=g(g(r)),o=I(i),d=g(g(o)),_=I(d),f=g(g(d)),a=g(g(f)),l,Q;q(()=>{l!==(l=`https://flagcdn.com/h240/${W(e.country.code)}.png`)&&M(r,"src",l),Q!==(Q=e.country.code)&&M(r,"alt",Q)}),Z(_,()=>e.country.id,b=>{var p=C(b),E=x(p);nt(E,()=>e.country.answerOptions,1,(A,R,G)=>{var H=C(A),V=x(H);lt(V,{get id(){return e.country.id},get option(){return at(R)},isAlreadyAnswered:c}),h(A,H)},null),h(b,p)}),mt(f,{}),K(a,{get fetchData(){return e.fetchData}}),w(n,s),L()}var wt=m('<meta name="description" content="Quess-A-Flag">'),yt=m("<p>Error</p>"),ht=m('<h1 class="text-center svelte-12om222">Loading</h1>'),xt=m('<h1 class="text-center svelte-12om222">Refresh page to start again!</h1> <!>',!0),At=m('<section class="container mx-auto svelte-12om222"><!> <!></section>');function Ot(n,e){O(e,!1);const t={};j(t);const c=()=>u(B,"$isLoading",t),s=()=>u(U,"$countries",t),r=()=>u(z,"$countryId",t),i=()=>u(N,"$isError",t),o=async()=>{v(B,!0);const a=await fetch("/api").then(l=>l.json());v(U,a),s()[0],v(z,0),v(B,!1)};it(async()=>{await o()});var d=y(n,!0,At);tt(a=>{var l=y(a,!0,wt);et.title="Home",w(a,l)});var _=I(d),f=g(g(_));$(_,i,a=>{var l=y(a,!0,yt);w(a,l)},null),$(f,c,a=>{var l=y(a,!0,ht);w(a,l)},a=>{var l=C(a),Q=x(l);$(Q,()=>r()>=s().length,b=>{var p=st(b,!0,xt),E=x(p),A=g(g(E));K(A,{}),h(b,p)},b=>{var p=C(b),E=x(p);$(E,()=>s().length!==0,A=>{var R=C(A),G=x(R);pt(G,{get country(){return s()[r()]},fetchData:o}),h(A,R)},null),h(b,p)}),h(a,l)}),w(n,d),L()}export{Ot as component,Dt as universal};
