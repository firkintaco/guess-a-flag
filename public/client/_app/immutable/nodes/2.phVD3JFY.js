import{G as F,H as Z,z as V,t as tt,g as w,h as p,a as D,d as m,i as O,c as h,b as y,y as A,I as et,s as v,J as M,x as st,$ as rt,o as ot}from"../chunks/disclose-version.Lxp0NizN.js";import{a as j,u as L,r as X,g as nt,p as z,b as U,c as f,s as c,m as at,G as J,z as it}from"../chunks/runtime.zQU0RrEG.js";import{a as x,b as S,s as R,c as P,d as T,u as W,i as G,e as q}from"../chunks/store.SAyfdFr1.js";import{e as ct}from"../chunks/each.Vts6kckv.js";import{s as K}from"../chunks/session.Tg9dBN4O.js";import{o as dt}from"../chunks/main-client.ULUgH7-b.js";const ut=!0,jt=Object.freeze(Object.defineProperty({__proto__:null,prerender:ut},Symbol.toStringTag,{value:"Module"})),lt=async(n,e,t,a,s,r,i)=>{if(t())console.log(t());else{const o=await fetch(`/api?id=${a.id}&answer=${a.option}`).then(d=>d.json());o.correct?U(s,"bg-green-700"):U(s,"bg-red-700"),f(e,!0),f(r,o.correct)}};var ft=m("<button> </button>");function gt(n,e){j(e,!1);const t={};L(t);const a=()=>c(x,"$isQuestionAnswered",t),s=()=>c(S,"$isCorrect",t);let r=at("bg-blue-700");var i=p(n,!0,ft),o=D(i);X(()=>{Z(i,`shadow p-2 ${V(nt(r))} min-w-full rounded text-white font-bold`),tt(o,e.option)}),i.__click=[lt,x,a,e,r,S,s],w(n,i),z()}F(["click"]);const vt=async(n,e,t,a,s,r,i,o,d,_)=>{try{await fetch(`/api/scores?id=${t().user?t().user.uid:crypto.randomUUID().toString()}&score=${s()}`,{method:"POST"})}catch(l){f(r,l)}o.fetchData(),f(d,!1),f(a,0)};var _t=m('<button class="w-full bg-red-700 rounded font-bold text-white shadow px-6 py-4">Restart</button>');function mt(n,e){j(e,!1);const t={};L(t);const a=()=>c(K,"$session",t),s=()=>c(R,"$score",t),r=()=>c(P,"$isError",t),i=()=>c(x,"$isQuestionAnswered",t),o=()=>c(S,"$isCorrect",t);var d=A(n),_=y(d);O(_,()=>!o()&&i(),l=>{var b=p(l,!0,_t);b.__click=[vt,K,a,R,s,P,r,e,x,i],w(l,b)},null),h(n,d),z()}F(["click"]);const bt=(n,e,t,a,s,r,i,o,d)=>{J(e,t()),f(a,!1),J(r,i()),f(o,!1)};var wt=m('<button class="w-full bg-green-800 px-6 py-4 rounded font-bold text-white shadow">Next country</button>');function pt(n,e){j(e,!1);const t={};L(t);const a=()=>c(T,"$countryId",t),s=()=>c(S,"$isCorrect",t),r=()=>c(R,"$score",t),i=()=>c(x,"$isQuestionAnswered",t);var o=A(n),d=y(o);O(d,s,_=>{var l=p(_,!0,wt);l.__click=[bt,T,a,S,s,R,r,x,i],w(_,l)},null),h(n,o),z()}F(["click"]);var ht=m('<div class="max-w-lg rounded overflow-hidden shadow-lg"><img class="w-full" height="240" width="360"> <div class="px-6 py-4"><div class="font-bold text-xl mb-2">What country is this?</div> <div class="grid gap-2 mb-2 sm:grid-cols-1 md:grid-cols-2"><!></div> <!> <!></div></div>');function yt(n,e){j(e,!1),L({});let a=!1;var s=p(n,!0,ht),r=D(s),i=v(v(r)),o=D(i),d=v(v(o)),_=D(d),l=v(v(d)),b=v(v(l)),Q,k;X(()=>{Q!==(Q=`https://flagcdn.com/h240/${V(e.country.code)}.png`)&&M(r,"src",Q),k!==(k=e.country.code)&&M(r,"alt",k)}),et(_,()=>e.country.id,B=>{var u=A(B),g=y(u);ct(g,()=>e.country.answerOptions,1,(N,$,C)=>{var E=A(N),I=y(E);gt(I,{get id(){return e.country.id},get option(){return it($)},isAlreadyAnswered:a}),h(N,E)},null),h(B,u)}),pt(l,{}),mt(b,{get fetchData(){return e.fetchData}}),w(n,s),z()}const xt=async(n,e,t,a,s,r,i,o,d,_)=>{try{await fetch(`/api/scores?id=${t()}&score=${s()}`,{method:"POST"})}catch(l){f(r,l)}o(),f(d,!1),f(a,0)};var $t=m('<meta name="description" content="Quess-A-Flag">'),At=m("<p>Error</p>"),Qt=m('<h1 class="text-center svelte-12om222">Loading</h1>'),kt=m('<h1 class="text-center svelte-12om222">Refresh page to start again!</h1> <button class="w-full bg-red-700 rounded font-bold text-white shadow px-6 py-4">Restart</button>',!0),Ct=m('<section class="container mx-auto svelte-12om222"><!> <!></section>');function Lt(n,e){j(e,!1);const t={};L(t);const a=()=>c(G,"$isLoading",t),s=()=>c(q,"$countries",t),r=()=>c(T,"$countryId",t),i=()=>c(W,"$uuid",t),o=()=>c(R,"$score",t),d=()=>c(P,"$isError",t),_=()=>c(x,"$isQuestionAnswered",t);let l;const b=async()=>{f(G,!0);const u=await fetch("/api").then(g=>g.json());f(q,u),s()[0],f(T,0),f(G,!1)};dt(async()=>{await b()}),console.log(l);var Q=p(n,!0,Ct);st(u=>{var g=p(u,!0,$t);rt.title="Home",w(u,g)});var k=D(Q),B=v(v(k));O(k,d,u=>{var g=p(u,!0,At);w(u,g)},null),O(B,a,u=>{var g=p(u,!0,Qt);w(u,g)},u=>{var g=A(u),N=y(g);O(N,()=>r()>=s().length,$=>{var C=ot($,!0,kt),E=y(C),I=v(v(E));I.__click=[xt,W,i,R,o,P,d,b,x,_],h($,C)},$=>{var C=A($),E=y(C);O(E,()=>s().length!==0,I=>{var H=A(I),Y=y(H);yt(Y,{get country(){return s()[r()]},fetchData:b}),h(I,H)},null),h($,C)}),h(u,g)}),w(n,Q),z()}F(["click"]);export{Lt as component,jt as universal};
