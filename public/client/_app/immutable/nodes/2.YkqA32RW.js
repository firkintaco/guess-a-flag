import{r as _e,u as z,v as re,S as W,w as ve,x as X,y as ge,z as he,A as N,B as me,C as le,D as pe,g as oe,t as ye,f as A,h as C,a as L,d as E,E as be,k as T,s as x,F as J,c as D,m as M,b as O,G as we,$ as xe}from"../chunks/disclose-version.okvWzaCt.js";import{r as I,j as Ae,E as ie,k as Ce,l as R,m as Z,n as q,o as $,q as Ee,v as H,w as Ie,x as Se,y as ce,z as ke,A as ze,B as ue,h as ee,c as G,b as K,g as Le,p as P,i as te,C as b,s as w,D as se,F as Te}from"../chunks/runtime.lX4xhXbU.js";import{i as Q,a as j,c as B,s as F,b as V,d as ne}from"../chunks/store.mXhkphAh.js";import{o as De}from"../chunks/main-client.cKZVkS0P.js";function Me(){}function Oe(e,n,t,a,s,c,u){const v=(t&H)!==0,r=Ie(t,e);let g=null;_e(e,v);let f,h=null,y=null;r.r=l=>{const d=g,i=d.s;i.add(l),l.f(()=>{i.delete(l),i.size===0&&d.e!==null&&(d.d!==null&&(z(d.d),d.d=null),R(d.e),d.e=null)})};const o=()=>{const l={d:null,e:null,s:new Set,p:g},d=I(()=>{const i=r.d;i!==null&&(z(i),r.d=null);let _=r.a;(r.f&H)!==0&&(_=me(),r.a.appendChild(_)),c(_),l.d=r.d,r.d=null},r,!0);l.e=d,g=l},p=l=>{const d=l.f,i=(d&H)!==0,_=l.a;u(f,l,_,i,s,d,!0,h)},m=I(()=>{const l=n();f=Ae(l)?l:l==null?[]:Array.from(l),a!==null?h=f.map(a):t&ie||f.map(Me);const d=f.length;if(c!==null){if(d===0){if(r.v.length!==0||y===null){p(r),o();return}}else if(r.v.length===0&&g!==null){const i=g,_=i.s;_.size===0?i.d!==null&&(z(i.d),i.d=null):re(_,"out")}}y!==null&&Se(y)},r,!1);y=I(p,r,!0),Ce(m,()=>{const l=r.f,d=r.a,i=(l&H)!==0;let _=g;for(;_!==null;){const S=_.d;S!==null&&z(S);const k=_.e;k!==null&&R(k),_=_.p}u([],r,d,i,s,l,!1,h),R(y)}),r.e=m}function Qe(e,n,t,a,s){Oe(e,n,t,null,a,s,He)}function He(e,n,t,a,s,c,u){var v=W in e&&e[W].i,r=n.v,g=n.s;v&&(c&=~q);var f=r.length,h=e.length,y=Math.max(f,h),o=0,p,m;if(g.length!==0&&je(g),h===0)for(p=[],a&&f!==0&&ve(t);o<y;)m=r[o++],Y(m,g,u,a);else{var l;if(p=Array(h),X!==null)for(var d=X[0];o<y;o++){l=v?Z(e,o):e[o];var i=ge(d);he(i),d=i.at(-1).nextSibling.nextSibling,m=ae(l,null,o,s,c),p[o]=m}else for(;o<y;o++)o>=f?(l=v?Z(e,o):e[o],m=ae(l,null,o,s,c),p[o]=m,Re(m,t,a,null)):o>=h?(m=r[o],Y(m,g,u)):(l=e[o],m=r[o],p[o]=m,Be(m,l,o,c))}n.v=p}function Re(e,n,t,a){var s=e.d;return a===null?t?N(s,n,null):N(s,n.parentNode,n):N(s,null,a)}function je(e){var n=e.length;if(n>0){for(var t=0,a,s;t<n;t++)a=e[t],s=a.r,s!==null&&(a.r=null,Y(a,null,!1));e.length=0}}function Be(e,n,t,a){a&q?$(e.v,n):Ee(e.v)&&(e.v.o[e.v.p]=n);const s=e.s,c=(a&ce)!==0,u=e.a;s!==null&&a&ie&&u!==null&&u(e,s),c?$(e.i,t):e.i=t}function Y(e,n,t,a=!1){const s=e.s;if(t&&s!==null){for(let u of s)u.r==="key"&&s.delete(u);if(s.size===0)e.s=null;else{re(s,"out"),n!==null&&n.push(e);return}}const c=e.d;!a&&c!==null&&z(c),R(e.e)}function ae(e,n,t,a,s){const u=(s&q)===0?e:s&ze?ee(e):ue(e),v=s&ce?ee(t):t,r=ke(u,v,n),g=I(f=>{a(null,f.v,f.i)},r,!0);return r.e=g,r}const Ne=!0,rt=Object.freeze(Object.defineProperty({__proto__:null,prerender:Ne},Symbol.toStringTag,{value:"Module"})),Fe=async(e,n,t,a,s,c,u)=>{if(t())console.log(t());else{const v=await fetch(`/api?id=${a.id}&answer=${a.option}`).then(r=>r.json());v.correct?te(s,"bg-green-700"):te(s,"bg-red-700"),b(n,!0),b(c,v.correct)}};var Ve=E("<button> </button>");function Ye(e,n){G(n,!1);const t={};K(t);const a=()=>w(Q,"$isQuestionAnswered",t),s=()=>w(j,"$isCorrect",t);let c=ue("bg-blue-700");var u=C(e,!0,Ve),v=L(u);I(()=>{pe(u,`shadow p-2 ${oe(Le(c))} min-w-full rounded text-white font-bold`),ye(v,n.option)}),u.__click=[Fe,Q,a,n,c,j,s],A(e,u),P()}le(["click"]);const qe=(e,n,t,a,s,c,u,v,r)=>{se(n,t()),b(a,!1),se(c,u()),b(v,!1)},Ge=(e,n,t,a,s,c)=>{n.fetchData(),b(t,!1),b(s,0)};var Ke=E('<button class="w-full bg-blue-700 px-6 py-4 rounded font-bold text-white shadow">Next country</button>'),Pe=E('<button class="w-full bg-blue-700 rounded font-bold text-white shadow px-6 py-4">Restart</button>'),Ue=E('<div class="max-w-lg rounded overflow-hidden shadow-lg"><img class="w-full" height="240" width="360"> <div class="px-6 py-4"><div class="font-bold text-xl mb-2">What country is this?</div> <div class="grid gap-2 mb-2 sm:grid-cols-1 md:grid-cols-2"><!></div> <!> <!></div></div>');function We(e,n){G(n,!1);const t={};K(t);const a=()=>w(B,"$countryId",t),s=()=>w(j,"$isCorrect",t),c=()=>w(F,"$score",t),u=()=>w(Q,"$isQuestionAnswered",t);let v=!1;var r=C(e,!0,Ue),g=L(r),f=x(x(g)),h=L(f),y=x(x(h)),o=L(y),p=x(x(y)),m=x(x(p)),l,d;I(()=>{l!==(l=`https://flagcdn.com/h240/${oe(n.country.code)}.png`)&&J(g,"src",l),d!==(d=n.country.code)&&J(g,"alt",d)}),be(o,()=>n.country.id,i=>{var _=M(i),S=O(_);Qe(S,()=>n.country.answerOptions,1,(k,de,et)=>{var U=M(k),fe=O(U);Ye(fe,{get id(){return n.country.id},get option(){return Te(de)},isAlreadyAnswered:v}),D(k,U)},null),D(i,_)}),T(p,s,i=>{var _=C(i,!0,Ke);_.__click=[qe,B,a,j,s,F,c,Q,u],A(i,_)},null),T(m,()=>!s()&&u(),i=>{var _=C(i,!0,Pe);_.__click=[Ge,n,Q,u,F,c],A(i,_)},null),A(e,r),P()}le(["click"]);var Xe=E('<meta name="description" content="Quess-A-Flag">'),Je=E('<h1 class="svelte-12om222">Loading</h1>'),Ze=E('<h1 class="svelte-12om222">Refresh page to start again!</h1>'),$e=E('<section class="container mx-auto svelte-12om222"><!></section>');function lt(e,n){G(n,!1);const t={};K(t);const a=()=>w(V,"$isLoading",t),s=()=>w(ne,"$countries",t),c=()=>w(B,"$countryId",t);let u;const v=async()=>{b(V,!0);const f=await fetch("/api").then(h=>h.json());b(ne,f),s()[0],b(B,0),b(V,!1)};De(async()=>{await v()}),console.log(u);var r=C(e,!0,$e);we(f=>{var h=C(f,!0,Xe);xe.title="Home",A(f,h)});var g=L(r);T(g,a,f=>{var h=C(f,!0,Je);A(f,h)},f=>{var h=M(f),y=O(h);T(y,()=>c()>=s().length,o=>{var p=C(o,!0,Ze);A(o,p)},o=>{var p=M(o),m=O(p);T(m,()=>s().length!==0,l=>{var d=M(l),i=O(d);We(i,{get country(){return s()[c()]},fetchData:v}),D(l,d)},null),D(o,p)}),D(f,h)}),A(e,r),P()}export{lt as component,rt as universal};
