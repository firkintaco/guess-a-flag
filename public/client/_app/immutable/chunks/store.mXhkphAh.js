import{w as v}from"./index.K1lkvplB.js";let r=[],E=(e,f)=>{let n=[],s={get(){return s.lc||s.listen(()=>{})(),s.value},l:f||0,lc:0,listen(i,l){return s.lc=n.push(i,l||s.l)/2,()=>{let t=n.indexOf(i);~t&&(n.splice(t,2),--s.lc||s.off())}},notify(i){let l=!r.length;for(let t=0;t<n.length;t+=2)r.push(n[t],n[t+1],s.value,i);if(l){for(let t=0;t<r.length;t+=4){let d;for(let o=t+1;!d&&(o+=4)<r.length;)r[o]<r[t+1]&&(d=r.push(r[t],r[t+1],r[t+2],r[t+3]));d||r[t](r[t+2],r[t+3])}r.length=0}},off(){},set(i){s.value!==i&&(s.value=i,s.notify())},subscribe(i,l){let t=s.listen(i,l);return i(s.value),t},value:e};return s};const h=5,c=6,g=10;let L=(e,f,n,s)=>(e.events=e.events||{},e.events[n+g]||(e.events[n+g]=s(i=>{e.events[n].reduceRight((l,t)=>(t(l),l),{shared:{},...i})})),e.events[n]=e.events[n]||[],e.events[n].push(f),()=>{let i=e.events[n],l=i.indexOf(f);i.splice(l,1),i.length||(delete e.events[n],e.events[n+g](),delete e.events[n+g])}),O=1e3,T=(e,f)=>L(e,s=>{let i=f(s);i&&e.events[c].push(i)},h,s=>{let i=e.listen;e.listen=(...t)=>(!e.lc&&!e.active&&(e.active=!0,s()),i(...t));let l=e.off;return e.events[c]=[],e.off=()=>{l(),setTimeout(()=>{if(e.active&&!e.lc){e.active=!1;for(let t of e.events[c])t();e.events[c]=[]}},O)},()=>{e.listen=i,e.off=l}}),w=e=>e,a={},p={addEventListener(){},removeEventListener(){}};function U(){try{return typeof localStorage<"u"}catch{return!1}}U()&&(a=localStorage);let N={addEventListener(e,f,n){window.addEventListener("storage",f),window.addEventListener("pageshow",n)},removeEventListener(e,f,n){window.removeEventListener("storage",f),window.removeEventListener("pageshow",n)}};typeof window<"u"&&(p=N);function m(e,f=void 0,n={}){let s=n.encode||w,i=n.decode||w,l=E(f),t=l.set;l.set=u=>{typeof u>"u"?delete a[e]:a[e]=s(u),t(u)};function d(u){u.key===e?u.newValue===null?t(void 0):t(i(u.newValue)):a[e]||t(void 0)}function o(){l.set(a[e]?i(a[e]):f)}return T(l,()=>{if(o(),n.listen!==!1)return p.addEventListener(e,d,o),()=>{p.removeEventListener(e,d,o)}}),l}const y=v(!1),M=v([]),S=v(0),k=v(!1),A=v(0),R=v(!1);m("user_uuid",crypto.randomUUID().toString());export{k as a,y as b,S as c,M as d,R as i,A as s};
