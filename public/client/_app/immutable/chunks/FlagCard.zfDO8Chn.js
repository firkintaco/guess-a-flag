import{B as I,C as U,A as W,t as V,g as A,h as C,a as m,d as k,j as q,c as y,b as h,k as p,z as X,s as l,D as F}from"./disclose-version.gLDZU4pp.js";import{a as Q,u as $,r as G,g as Y,p as N,b as S,f,s as c,m as Z,B as z,e as ss}from"./runtime.Z3s11QRo.js";import{d as g,f as w,s as x,b as J,a as P,e as ts}from"./store.H7KOKlfw.js";import{s as T}from"./session.Tg9dBN4O.js";const es=async(o,t,s,n,a,i,r)=>{if(s())console.log(s());else{const e=await fetch(`/api?id=${n.id}&answer=${n.option}`).then(d=>d.json());e.correct?S(a,"bg-green-700"):S(a,"bg-red-700"),f(t,!0),f(i,e.correct)}};var rs=k("<button> </button>");function os(o,t){Q(t,!1);const s={};$(s);const n=()=>c(g,"$isQuestionAnswered",s),a=()=>c(w,"$isCorrect",s);let i=Z("bg-blue-700");var r=C(o,!0,rs),e=m(r);G(()=>{U(r,`shadow p-2 ${W(Y(i))} min-w-full rounded text-white font-bold`),V(e,t.option)}),r.__click=[es,g,n,t,i,w,a],A(o,r),N()}I(["click"]);const ns=async(o,t,s,n,a,i,r,e,d,v)=>{if(s()?.user?.uid)try{await fetch("/api/scores",{method:"POST",body:JSON.stringify({userId:s().user.uid,displayName:s().user.displayName,score:a()})})}catch(u){f(i,u),console.log(u)}e.fetchData(),f(d,!1),f(n,0)};var as=k('<button class="w-full bg-red-700 rounded font-bold text-white shadow px-6 py-4">Restart</button>');function is(o,t){Q(t,!1);const s={};$(s);const n=()=>c(T,"$session",s),a=()=>c(x,"$score",s),i=()=>c(J,"$isError",s),r=()=>c(g,"$isQuestionAnswered",s);var e=C(o,!0,as);e.__click=[ns,T,n,x,a,J,i,t,g,r],A(o,e),N()}I(["click"]);const cs=(o,t,s,n,a,i,r,e,d)=>{z(t,s()),f(n,!1),z(i,r()),f(e,!1)};var ds=k('<button class="w-full bg-green-800 px-6 py-4 rounded font-bold text-white shadow">Next country</button>');function us(o,t){Q(t,!1);const s={};$(s);const n=()=>c(P,"$countryId",s),a=()=>c(w,"$isCorrect",s),i=()=>c(x,"$score",s),r=()=>c(g,"$isQuestionAnswered",s);var e=p(o),d=h(e);q(d,a,v=>{var u=C(v,!0,ds);u.__click=[cs,P,n,w,a,x,i,g,r],A(v,u)},null),y(o,e),N()}I(["click"]);var ls=k('<div class="max-w-lg rounded overflow-hidden shadow-lg bg-white"><img class="w-full" height="240" width="360"> <div class="px-6 py-4"><div class="font-bold text-xl mb-2">What country is this?</div> <div class="grid gap-2 mb-2 sm:grid-cols-1 md:grid-cols-2"><!></div> <!> <!></div></div>');function ws(o,t){Q(t,!1);const s={};$(s);const n=()=>c(w,"$isCorrect",s),a=()=>c(g,"$isQuestionAnswered",s);let i=!1;var r=C(o,!0,ls),e=m(r),d=l(l(e)),v=m(d),u=l(l(v)),H=m(u),O=l(l(u)),K=l(l(O)),B,D;G(()=>{B!==(B=`https://flagcdn.com/h240/${W(t.country.code)}.png`)&&F(e,"src",B),D!==(D=t.country.code)&&F(e,"alt",D)}),X(H,()=>t.country.id,b=>{var _=p(b),E=h(_);ts(E,()=>t.country.answerOptions,1,(R,L,fs)=>{var j=p(R),M=h(j);os(M,{get id(){return t.country.id},get option(){return ss(L)},isAlreadyAnswered:i}),y(R,j)},null),y(b,_)}),us(O,{}),q(K,()=>!n()&&a(),b=>{var _=p(b),E=h(_);is(E,{get fetchData(){return t.fetchData}}),y(b,_)},null),A(o,r),N()}export{ws as F,is as R};
