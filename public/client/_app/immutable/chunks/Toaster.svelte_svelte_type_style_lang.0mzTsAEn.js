import{d as _,g as y,w as S}from"./index.CbXXN6g-.js";function x(e,r,u,i){var a,h,f=!1,M=u.length>=2,R=(s,t,o)=>{if(a=t,M&&(h=s),!f){let d=r(s,t,o);if(r.length<2)t(d);else return d}f=!1},p=_(e,R,i),V=!Array.isArray(e);function k(s){var t=u(s,h);V?(f=!0,e.set(t)):t.forEach((o,d)=>{f=!0,e[d].set(o)}),f=!1}var v=!1;function T(s){var t,o,d,l;if(v){l=s(y(p)),a(l);return}var P=p.subscribe(Q=>{v?t?o=!0:t=!0:d=Q});l=s(d),v=!0,a(l),P(),v=!1,o&&(l=y(p)),t&&k(l)}return{subscribe:p.subscribe,set(s){T(()=>s)},update:T}}const E=20,c=S([]),g=S(null),b=new Map,w=e=>{if(b.has(e))return;const r=setTimeout(()=>{b.delete(e),A(e)},1e3);b.set(e,r)},j=e=>{const r=b.get(e);r&&clearTimeout(r)};function B(e){e.id&&j(e.id),c.update(r=>r.map(u=>u.id===e.id?{...u,...e}:u))}function H(e){c.update(r=>[e,...r].slice(0,E))}function L(e){y(c).find(r=>r.id===e.id)?B(e):H(e)}function N(e){c.update(r=>(e?w(e):r.forEach(u=>{w(u.id)}),r.map(u=>u.id===e||e===void 0?{...u,visible:!1}:u)))}function A(e){c.update(r=>e===void 0?[]:r.filter(u=>u.id!==e))}function F(e){g.set(e)}function G(e){let r;g.update(u=>(r=e-(u||0),null)),c.update(u=>u.map(i=>({...i,pauseDuration:i.pauseDuration+r})))}const U={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3};function J(e={}){return{toasts:x(c,u=>u.map(i=>({...e,...e[i.type],...i,duration:i.duration||e[i.type]?.duration||e?.duration||U[i.type],style:[e.style,e[i.type]?.style,i.style].join(";")})),u=>u),pausedAt:g}}const W=e=>typeof e=="function",D=(e,r)=>W(e)?e(r):e,q=(()=>{let e=0;return()=>(e+=1,e.toString())})(),K=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){const r=matchMedia("(prefers-reduced-motion: reduce)");e=!r||r.matches}return e}})(),z=(e,r="blank",u)=>({createdAt:Date.now(),visible:!0,type:r,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...u,id:u?.id||q()}),m=e=>(r,u)=>{const i=z(r,e,u);return L(i),i.id},n=(e,r)=>m("blank")(e,r);n.error=m("error");n.success=m("success");n.loading=m("loading");n.custom=m("custom");n.dismiss=e=>{N(e)};n.remove=e=>A(e);n.promise=(e,r,u)=>{const i=n.loading(r.loading,{...u,...u?.loading});return e.then(a=>(n.success(D(r.success,a),{id:i,...u,...u?.success}),a)).catch(a=>{n.error(D(r.error,a),{id:i,...u,...u?.error})}),e};export{B as a,G as e,K as p,F as s,n as t,J as u};
