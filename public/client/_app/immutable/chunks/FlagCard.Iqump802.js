import{D as F,E as ts,C as h,f as K,c as C,o as Q,a as v,t as k,i as L,d as p,j as x,g as A,B as es,s as d,F as T}from"./disclose-version.obGOZsW6.js";import{a as I,z as N,r as M,g as rs,p as B,s as W,B as f,A as c,m as os,D as q,d as ns}from"./runtime.QezSLGb2.js";import{e as as}from"./each.nEGUvMwz.js";import{d as g,e as y,s as $,b as G,a as R,c as is}from"./store.Fa0ykZqT.js";import{s as H}from"./session.goP9yUW7.js";import{t as cs}from"./Toaster.svelte_svelte_type_style_lang.m6_LZ8UL.js";const ds=async(n,t,s,a,i,e,r)=>{if(s())console.log(s());else{const o=await fetch(`/api?id=${a.id}&answer=${a.option}`).then(u=>u.json());o.correct?W(i,"bg-green-700"):W(i,"bg-red-700"),f(t,!0),f(e,o.correct)}};var us=k("<button> </button>");function ls(n,t){I(t,!1);const s={};N(s);const a=()=>c(g,"$isQuestionAnswered",s),i=()=>c(y,"$isCorrect",s);let e=os("bg-blue-700");var r=Q(n,!0,us),o=v(r);M(()=>{ts(r,`shadow p-2 ${h(rs(e))} min-w-full rounded text-white font-bold`),K(o,t.option)}),r.__click=[ds,g,a,t,e,y,i],C(n,r),B()}F(["click"]);const fs=async(n,t,s,a,i,e,r,o,u,l,m)=>{if(s()?.user?.uid)try{await fetch("/api/scores",{method:"POST",body:JSON.stringify({userId:s().user.uid,displayName:s().user.displayName,score:i()})}),e.success("Score saved.")}catch(_){f(r,_),e.error(_),console.log(_)}u.fetchData(),f(l,!1),f(a,0)};var gs=k('<button class="w-full bg-red-700 rounded font-bold text-white shadow px-6 py-4">Restart</button>');function vs(n,t){I(t,!1);const s={};N(s);const a=()=>c(H,"$session",s),i=()=>c($,"$score",s),e=()=>c(G,"$isError",s),r=()=>c(g,"$isQuestionAnswered",s);var o=Q(n,!0,gs);o.__click=[fs,H,a,$,i,cs,G,e,t,g,r],C(n,o),B()}F(["click"]);const ms=(n,t,s,a,i,e,r,o,u)=>{q(t,s()),f(a,!1),q(e,r()),f(o,!1)};var _s=k('<button class="w-full bg-green-800 px-6 py-4 rounded font-bold text-white shadow">Next country</button>');function bs(n,t){I(t,!1);const s={};N(s);const a=()=>c(R,"$countryId",s),i=()=>c(y,"$isCorrect",s),e=()=>c($,"$score",s),r=()=>c(g,"$isQuestionAnswered",s);var o=A(n),u=x(o);L(u,i,l=>{var m=Q(l,!0,_s);m.__click=[ms,R,a,y,i,$,e,g,r],C(l,m)},null),p(n,o),B()}F(["click"]);var ws=k('<div class="max-w-lg rounded overflow-hidden shadow-lg bg-white"><img class="w-full" height="240" width="360"> <div class="px-6 pt-4 pb-2"><div class="font-bold text-xl mb-2">What country is this?</div> <div class="grid gap-2 mb-2 sm:grid-cols-1 md:grid-cols-2"><!></div> <!> <!> <div class="text-center"><span class="text-gray-400"> </span></div></div></div>');function Qs(n,t){I(t,!1);const s={};N(s);const a=()=>c(R,"$countryId",s),i=()=>c(y,"$isCorrect",s),e=()=>c(g,"$isQuestionAnswered",s),r=()=>c(is,"$countries",s);let o=!1;var u=Q(n,!0,ws),l=v(u),m=d(d(l)),_=v(m),S=d(d(_)),U=v(S),j=d(d(S)),z=d(d(j)),V=d(d(z)),X=v(V),Y=v(X),D,E;M(()=>{D!==(D=`https://flagcdn.com/h240/${h(t.country.code)}.png`)&&T(l,"src",D),E!==(E=t.country.code)&&T(l,"alt",E),K(Y,`${h(a())}/${h(r().length)}`)}),es(U,()=>t.country.id,b=>{var w=A(b),O=x(w);as(O,()=>t.country.answerOptions,1,(J,Z,ys)=>{var P=A(J),ss=x(P);ls(ss,{get id(){return t.country.id},get option(){return ns(Z)},isAlreadyAnswered:o}),p(J,P)},null),p(b,w)}),bs(j,{}),L(z,()=>!i()&&e(),b=>{var w=A(b),O=x(w);vs(O,{get fetchData(){return t.fetchData}}),p(b,w)},null),C(n,u),B()}export{Qs as F,vs as R};
