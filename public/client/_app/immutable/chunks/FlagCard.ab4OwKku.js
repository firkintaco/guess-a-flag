import{B as R,C as ts,A as y,t as H,g as $,h as C,a as b,d as k,j as K,c as h,b as p,k as x,z as es,s as d,D as P}from"./disclose-version.gLDZU4pp.js";import{a as Q,u as I,r as L,g as rs,p as N,b as T,f as g,s as c,m as os,B as W,e as ns}from"./runtime.Z3s11QRo.js";import{d as v,f as m,s as A,b as q,a as O,c as as,e as is}from"./store.H7KOKlfw.js";import{s as G}from"./session.Tg9dBN4O.js";const cs=async(r,t,s,o,n,a,i)=>{if(s())console.log(s());else{const e=await fetch(`/api?id=${o.id}&answer=${o.option}`).then(u=>u.json());e.correct?T(n,"bg-green-700"):T(n,"bg-red-700"),g(t,!0),g(a,e.correct)}};var ds=k("<button> </button>");function us(r,t){Q(t,!1);const s={};I(s);const o=()=>c(v,"$isQuestionAnswered",s),n=()=>c(m,"$isCorrect",s);let a=os("bg-blue-700");var i=C(r,!0,ds),e=b(i);L(()=>{ts(i,`shadow p-2 ${y(rs(a))} min-w-full rounded text-white font-bold`),H(e,t.option)}),i.__click=[cs,v,o,t,a,m,n],$(r,i),N()}R(["click"]);const ls=async(r,t,s,o,n,a,i,e,u,l)=>{if(s()?.user?.uid)try{await fetch("/api/scores",{method:"POST",body:JSON.stringify({userId:s().user.uid,displayName:s().user.displayName,score:n()})})}catch(f){g(a,f),console.log(f)}e.fetchData(),g(u,!1),g(o,0)};var fs=k('<button class="w-full bg-red-700 rounded font-bold text-white shadow px-6 py-4">Restart</button>');function gs(r,t){Q(t,!1);const s={};I(s);const o=()=>c(G,"$session",s),n=()=>c(A,"$score",s),a=()=>c(q,"$isError",s),i=()=>c(v,"$isQuestionAnswered",s);var e=C(r,!0,fs);e.__click=[ls,G,o,A,n,q,a,t,v,i],$(r,e),N()}R(["click"]);const vs=(r,t,s,o,n,a,i,e,u)=>{W(t,s()),g(o,!1),W(a,i()),g(e,!1)};var bs=k('<button class="w-full bg-green-800 px-6 py-4 rounded font-bold text-white shadow">Next country</button>');function _s(r,t){Q(t,!1);const s={};I(s);const o=()=>c(O,"$countryId",s),n=()=>c(m,"$isCorrect",s),a=()=>c(A,"$score",s),i=()=>c(v,"$isQuestionAnswered",s);var e=x(r),u=p(e);K(u,n,l=>{var f=C(l,!0,bs);f.__click=[vs,O,o,m,n,A,a,v,i],$(l,f)},null),h(r,e),N()}R(["click"]);var ws=k('<div class="max-w-lg rounded overflow-hidden shadow-lg bg-white"><img class="w-full" height="240" width="360"> <div class="px-6 pt-4 pb-2"><div class="font-bold text-xl mb-2">What country is this?</div> <div class="grid gap-2 mb-2 sm:grid-cols-1 md:grid-cols-2"><!></div> <!> <!> <div class="text-center"><span class="text-gray-400"> </span></div></div></div>');function As(r,t){Q(t,!1);const s={};I(s);const o=()=>c(O,"$countryId",s),n=()=>c(m,"$isCorrect",s),a=()=>c(v,"$isQuestionAnswered",s),i=()=>c(as,"$countries",s);let e=!1;var u=C(r,!0,ws),l=b(u),f=d(d(l)),M=b(f),j=d(d(M)),U=b(j),F=d(d(j)),S=d(d(F)),V=d(d(S)),X=b(V),Y=b(X),B,D;L(()=>{B!==(B=`https://flagcdn.com/h240/${y(t.country.code)}.png`)&&P(l,"src",B),D!==(D=t.country.code)&&P(l,"alt",D),H(Y,`${y(o())}/${y(i().length)}`)}),es(U,()=>t.country.id,_=>{var w=x(_),E=p(w);is(E,()=>t.country.answerOptions,1,(z,Z,ms)=>{var J=x(z),ss=p(J);us(ss,{get id(){return t.country.id},get option(){return ns(Z)},isAlreadyAnswered:e}),h(z,J)},null),h(_,w)}),_s(F,{}),K(S,()=>!n()&&a(),_=>{var w=x(_),E=p(w);gs(E,{get fetchData(){return t.fetchData}}),h(_,w)},null),$(r,u),N()}export{As as F,gs as R};
