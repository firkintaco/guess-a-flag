import{D as F,E as ts,C as h,t as K,g as C,i as k,a as v,d as Q,j as L,c as p,b as x,k as A,B as es,s as d,F as W}from"./disclose-version.WNyamhy6.js";import{a as I,u as N,r as M,g as rs,p as D,b as q,h as f,s as c,m as os,D as z,f as ns}from"./runtime.gTq0fGWg.js";import{d as g,f as y,s as $,b as G,a as R,c as as,e as is}from"./store.c34zgRvx.js";import{s as H}from"./session.NCPXoLXL.js";import{t as cs}from"./Toaster.svelte_svelte_type_style_lang.0mzTsAEn.js";const ds=async(n,t,s,a,i,e,r)=>{if(s())console.log(s());else{const o=await fetch(`/api?id=${a.id}&answer=${a.option}`).then(u=>u.json());o.correct?q(i,"bg-green-700"):q(i,"bg-red-700"),f(t,!0),f(e,o.correct)}};var us=Q("<button> </button>");function ls(n,t){I(t,!1);const s={};N(s);const a=()=>c(g,"$isQuestionAnswered",s),i=()=>c(y,"$isCorrect",s);let e=os("bg-blue-700");var r=k(n,!0,us),o=v(r);M(()=>{ts(r,`shadow p-2 ${h(rs(e))} min-w-full rounded text-white font-bold`),K(o,t.option)}),r.__click=[ds,g,a,t,e,y,i],C(n,r),D()}F(["click"]);const fs=async(n,t,s,a,i,e,r,o,u,l,b)=>{if(s()?.user?.uid)try{await fetch("/api/scores",{method:"POST",body:JSON.stringify({userId:s().user.uid,displayName:s().user.displayName,score:i()})}),e.success("Score saved.")}catch(_){f(r,_),e.error(_),console.log(_)}u.fetchData(),f(l,!1),f(a,0)};var gs=Q('<button class="w-full bg-red-700 rounded font-bold text-white shadow px-6 py-4">Restart</button>');function vs(n,t){I(t,!1);const s={};N(s);const a=()=>c(H,"$session",s),i=()=>c($,"$score",s),e=()=>c(G,"$isError",s),r=()=>c(g,"$isQuestionAnswered",s);var o=k(n,!0,gs);o.__click=[fs,H,a,$,i,cs,G,e,t,g,r],C(n,o),D()}F(["click"]);const bs=(n,t,s,a,i,e,r,o,u)=>{z(t,s()),f(a,!1),z(e,r()),f(o,!1)};var _s=Q('<button class="w-full bg-green-800 px-6 py-4 rounded font-bold text-white shadow">Next country</button>');function ms(n,t){I(t,!1);const s={};N(s);const a=()=>c(R,"$countryId",s),i=()=>c(y,"$isCorrect",s),e=()=>c($,"$score",s),r=()=>c(g,"$isQuestionAnswered",s);var o=A(n),u=x(o);L(u,i,l=>{var b=k(l,!0,_s);b.__click=[bs,R,a,y,i,$,e,g,r],C(l,b)},null),p(n,o),D()}F(["click"]);var ws=Q('<div class="max-w-lg rounded overflow-hidden shadow-lg bg-white"><img class="w-full" height="240" width="360"> <div class="px-6 pt-4 pb-2"><div class="font-bold text-xl mb-2">What country is this?</div> <div class="grid gap-2 mb-2 sm:grid-cols-1 md:grid-cols-2"><!></div> <!> <!> <div class="text-center"><span class="text-gray-400"> </span></div></div></div>');function Cs(n,t){I(t,!1);const s={};N(s);const a=()=>c(R,"$countryId",s),i=()=>c(y,"$isCorrect",s),e=()=>c(g,"$isQuestionAnswered",s),r=()=>c(as,"$countries",s);let o=!1;var u=k(n,!0,ws),l=v(u),b=d(d(l)),_=v(b),S=d(d(_)),U=v(S),j=d(d(S)),J=d(d(j)),V=d(d(J)),X=v(V),Y=v(X),E,B;M(()=>{E!==(E=`https://flagcdn.com/h240/${h(t.country.code)}.png`)&&W(l,"src",E),B!==(B=t.country.code)&&W(l,"alt",B),K(Y,`${h(a())}/${h(r().length)}`)}),es(U,()=>t.country.id,m=>{var w=A(m),O=x(w);is(O,()=>t.country.answerOptions,1,(P,Z,ys)=>{var T=A(P),ss=x(T);ls(ss,{get id(){return t.country.id},get option(){return ns(Z)},isAlreadyAnswered:o}),p(P,T)},null),p(m,w)}),ms(j,{}),L(J,()=>!i()&&e(),m=>{var w=A(m),O=x(w);vs(O,{get fetchData(){return t.fetchData}}),p(m,w)},null),C(n,u),D()}export{Cs as F,vs as R};
